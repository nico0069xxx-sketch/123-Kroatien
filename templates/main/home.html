{% extends 'include/base.html' %}
{% load static %}
{% load i18n %}
{% block body %}
    <!-- HERO SECTION -->
    <div class="hero-section" style="position: relative; height: 70vh; min-height: 500px; overflow: hidden;">
        <div class="hero-slider">
            <img src="/static/images/1.png" class="hero-slide active" alt="Kroatien">
            <img src="/static/images/2.png" class="hero-slide" alt="Kroatien">
            <img src="/static/images/3.png" class="hero-slide" alt="Kroatien">
            <img src="/static/images/4.png" class="hero-slide" alt="Kroatien">
            <img src="/static/images/5.png" class="hero-slide" alt="Kroatien">
        </div>
        <div style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: linear-gradient(180deg, rgba(15,23,42,0.4) 0%, rgba(15,23,42,0.2) 40%, rgba(15,23,42,0.7) 100%); z-index: 2;"></div>
        <div style="position: absolute; bottom: 15%; left: 0; right: 0; z-index: 10; padding: 0 2rem;">
            <div class="container">
                <p style="font-size: 0.875rem; font-weight: 500; letter-spacing: 0.2em; text-transform: uppercase; color: rgba(255,255,255,0.95); margin-bottom: 1rem; text-shadow: 0 2px 10px rgba(0,0,0,0.5);">{{hero_tagline}}</p>
                <h1 style="font-size: clamp(2rem, 5vw, 3.5rem); font-weight: 500; color: #fff; line-height: 1.15; margin-bottom: 1.25rem; text-shadow: 0 2px 20px rgba(0,0,0,0.7), 0 4px 40px rgba(0,0,0,0.5);">{{hero_title|safe}}</h1>
                <p style="font-size: 1.125rem; color: rgba(255,255,255,0.95); max-width: 500px; text-shadow: 0 2px 10px rgba(0,0,0,0.5);">{{hero_subtitle}}</p>
            </div>
        </div>
    </div>
    <style>
        .hero-slider { position: absolute; top: 0; left: 0; width: 100%; height: 100%; }
        .hero-slide { position: absolute; top: 0; left: 0; width: 100%; height: 100%; object-fit: cover; opacity: 0; transition: opacity 1.5s ease-in-out; }
        .hero-slide.active { opacity: 1; }
    </style>
    <script>
        (function() {
            var slides = document.querySelectorAll('.hero-slide');
            var current = 0;
            setInterval(function() {
                slides[current].classList.remove('active');
                current = (current + 1) % slides.length;
                slides[current].classList.add('active');
            }, 5000);
        })();
    </script>
    
    <!-- Scroll Reveal Animation Script -->
    <script>
    document.addEventListener('DOMContentLoaded', function() {
        // Add scroll-reveal class to sections
        var sections = document.querySelectorAll('.popular__city-large, .featured__property, .home__about, .projects__partner, .blog__home');
        sections.forEach(function(section) {
            section.classList.add('scroll-reveal');
        });
        
        // Add scroll-reveal to cards with stagger
        var cards = document.querySelectorAll('.myCard');
        cards.forEach(function(card, index) {
            card.classList.add('scroll-reveal');
            card.classList.add('scroll-reveal-delay-' + ((index % 3) + 1));
        });
        
        // Add scroll-reveal to property cards
        var propertyCards = document.querySelectorAll('.card__image');
        propertyCards.forEach(function(card, index) {
            card.classList.add('scroll-reveal');
            card.classList.add('scroll-reveal-delay-' + ((index % 4) + 1));
        });
        
        // About section - left/right animation
        var aboutText = document.querySelector('.title__leading');
        var aboutImages = document.querySelector('.about__image');
        if (aboutText) aboutText.classList.add('scroll-reveal-left');
        if (aboutImages) aboutImages.classList.add('scroll-reveal-right');
        
        // Reveal function
        function revealOnScroll() {
            var reveals = document.querySelectorAll('.scroll-reveal, .scroll-reveal-left, .scroll-reveal-right, .scroll-reveal-scale');
            reveals.forEach(function(el) {
                var windowHeight = window.innerHeight;
                var elementTop = el.getBoundingClientRect().top;
                var revealPoint = 100;
                
                if (elementTop < windowHeight - revealPoint) {
                    el.classList.add('revealed');
                }
            });
        }
        
        // Initial check
        revealOnScroll();
        
        // Throttled scroll listener
        var ticking = false;
        window.addEventListener('scroll', function() {
            if (!ticking) {
                window.requestAnimationFrame(function() {
                    revealOnScroll();
                    ticking = false;
                });
                ticking = true;
            }
        });
    });
    </script>
    <!-- END HERO SECTION -->

    <!-- AI SMART-SEARCH -->
    <div class="container my-4">
        <div class="row justify-content-center">
            <div class="col-lg-8">
                <div class="smart-search-box" style="background: linear-gradient(135deg, #003167 0%, #004a99 100%); border-radius: 15px; padding: 25px; box-shadow: 0 4px 15px rgba(0,0,0,0.2);">
                    <h5 class="text-white text-center mb-3">
                        <i class="fa fa-magic"></i> {{ smart_search_title }}
                    </h5>
                    <div class="input-group">
                        <input type="text" id="smart-search-input" class="form-control form-control-lg" 
                               placeholder="{{ smart_search_placeholder }}"
                               style="border-radius: 10px 0 0 10px; border: none; padding: 15px;">
                        <div class="input-group-append">
                            <button id="smart-search-btn" class="btn btn-danger btn-lg" style="border-radius: 0 10px 10px 0; padding: 15px 30px;">
                                <i class="fa fa-search"></i>
                            </button>
                        </div>
                    </div>
                    <div id="smart-search-loading" class="text-center mt-3" style="display: none;">
                        <i class="fa fa-spinner fa-spin text-white"></i>
                        <span class="text-white ml-2">{{ smart_search_loading }}</span>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Smart-Search Ergebnisse -->
    <div id="smart-search-results" class="container my-4" style="display: none;">
        <div class="row">
            <div class="col-12">
                <h5 id="smart-search-message" class="text-center mb-4" style="color: #003167;"></h5>
            </div>
        </div>
        <div id="smart-search-listings" class="row"></div>
    </div>

    <div class="clearfix"></div>

    <!-- FILTER SEARCH -->
    <form class="search__area bg-light" action="{% url 'main:listings' %}" method="GET">
        <div class="container">
            <div class="search__area-inner">
                <div class="row">
                    <div class="col-6 col-lg-3 col-md-3">
                        <div class="form-group">
                            <select name="property_type" class="wide select_option">
                                <option value="">{{Property_Type}}</option>
                                <option value="House"
                                {% if request.GET.property_type == 'House' %}
                                    selected
                                {% endif %}
                                >{{House_f}}</option>
                                <option value="Appartment"
                                {% if request.GET.property_type == 'Appartment' %}
                                    selected
                                {% endif %}
                                >{{Appartment}}</option>
                                <option value="New Building"
                                {% if request.GET.property_type == 'New Building' %}
                                    selected
                                {% endif %}
                                >{{New_Building}}</option>
                                <option value="Property"
                                {% if request.GET.property_type == 'Property' %}
                                    selected
                                {% endif %}
                                >{{Property}}</option>
                            </select>
                        </div>
                    </div>
                    <div class="col-6 col-lg-3 col-md-3">
                        <div class="form-group">
                            <select name="property_status" id="property_status" class="wide select_option" onchange="updatePriceOptions()">
                                <option value="">{{filter_property_status}}</option>
                                <option value="Sale"
                                {% if request.GET.property_status == 'Sale' %}
                                    selected
                                {% endif %}
                                >{{filter_for_sale}}</option>
                                <option value="Rent"
                                {% if request.GET.property_status == 'Rent' %}
                                    selected
                                {% endif %}
                                >{{filter_For_Rent}}</option>

                            </select>
                        </div>
                    </div>
                    <div class="col-6 col-lg-3 col-md-3">
                        <div class="form-group">
                            <select class="wide select_option" name="area_from">
                                <option value="">{{ filter_area_from }}</option>
                                <option value="50" {% if request.GET.area_from == '50' %}selected{% endif %}>50 m²</option>
                                <option value="75" {% if request.GET.area_from == '75' %}selected{% endif %}>75 m²</option>
                                <option value="100" {% if request.GET.area_from == '100' %}selected{% endif %}>100 m²</option>
                                <option value="150" {% if request.GET.area_from == '150' %}selected{% endif %}>150 m²</option>
                                <option value="200" {% if request.GET.area_from == '200' %}selected{% endif %}>200 m²</option>
                                <option value="300" {% if request.GET.area_from == '300' %}selected{% endif %}>300 m²</option>
                                <option value="500" {% if request.GET.area_from == '500' %}selected{% endif %}>500+ m²</option>
                            </select>
                        </div>
                    </div>
                    <div class="col-6 col-lg-3 col-md-3">
                        <div class="form-group">
                            <select class="wide select_option" name="location">
                                <option value="">{{ filter_location }}</option>
                                <option value="Istrien">Istrien</option>
                                <option value="Primorje">Primorje</option>
                                <option value="Lika-Senj">Lika-Senj</option>
                                <option value="Zadar">Zadar</option>
                                <option value="Šibenik-Knin">Šibenik-Knin</option>
                                <option value="Split-Dalmatien">Split-Dalmatien</option>
                                <option value="Dubrovnik-Neretva">Dubrovnik-Neretva</option>
                                <option value="Karlovac">Karlovac</option>
                                <option value="Gespanschaft Zagreb">Gespanschaft Zagreb</option>
                                <option value="Stadt Zagreb">Stadt Zagreb</option>
                                <option value="Krapina-Zagorje">Krapina-Zagorje</option>
                                <option value="Varaždin">Varaždin</option>
                                <option value="Koprivnica-Križevci">Koprivnica-Križevci</option>
                                <option value="Bjelovar-Bilogora">Bjelovar-Bilogora</option>
                                <option value="Virovitica-Podravina">Virovitica-Podravina</option>
                                <option value="Požega-Slawonien">Požega-Slawonien</option>
                                <option value="Brod-Posavina">Brod-Posavina</option>
                                <option value="Osijek-Baranja">Osijek-Baranja</option>
                                <option value="Vukovar-Syrmien">Vukovar-Syrmien</option>
                                <option value="Međimurje">Međimurje</option>
                            </select>
                        </div>
                    </div>
                    <div class="col-6 col-lg-3 col-md-3">
                        <div class="form-group">
                            <select class="wide select_option" name="bedrooms">
                                <option value="">{{ filter_rooms }}</option>
                                <option value="1" {% if request.GET.bedrooms == '1' %}selected{% endif %}>1</option>
                                <option value="2" {% if request.GET.bedrooms == '2' %}selected{% endif %}>2</option>
                                <option value="3" {% if request.GET.bedrooms == '3' %}selected{% endif %}>3</option>
                                <option value="4" {% if request.GET.bedrooms == '4' %}selected{% endif %}>4</option>
                                <option value="5" {% if request.GET.bedrooms == '5' %}selected{% endif %}>5</option>
                                <option value="6" {% if request.GET.bedrooms == '6' %}selected{% endif %}>6</option>
                                <option value="7" {% if request.GET.bedrooms == '7' %}selected{% endif %}>7+</option>
                            </select>
                        </div>
                    </div>
                    <div class="col-6 col-lg-3 col-md-3">
                        <div class="form-group">
                            <select class="wide select_option" name="bathrooms">
                                <option value="">{{ filter_bathrooms }}</option>
                                <option value="1" {% if request.GET.bathrooms == '1' %}selected{% endif %}>1</option>
                                <option value="2" {% if request.GET.bathrooms == '2' %}selected{% endif %}>2</option>
                                <option value="3" {% if request.GET.bathrooms == '3' %}selected{% endif %}>3</option>
                                <option value="4" {% if request.GET.bathrooms == '4' %}selected{% endif %}>4+</option>
                            </select>
                        </div>
                    </div>
                    <div class="col-6 col-lg-3 col-md-3">
                        <div class="form-group">
                            <select class="wide select_option" name="price_from" id="price_from">
                                <option value="">{{ filter_price_from }}</option>
                                <option value="50000">50.000 EUR</option>
                                <option value="100000">100.000 EUR</option>
                                <option value="150000">150.000 EUR</option>
                                <option value="200000">200.000 EUR</option>
                                <option value="300000">300.000 EUR</option>
                                <option value="500000">500.000 EUR</option>
                                <option value="750000">750.000 EUR</option>
                                <option value="1000000">1.000.000 EUR</option>
                            </select>
                        </div>
                    </div>
                    <div class="col-6 col-lg-3 col-md-3">
                        <div class="form-group">
                            <select class="wide select_option" name="price_to" id="price_to">
                                <option value="">{{ filter_price_to }}</option>
                                <option value="100000">100.000 EUR</option>
                                <option value="200000">200.000 EUR</option>
                                <option value="300000">300.000 EUR</option>
                                <option value="500000">500.000 EUR</option>
                                <option value="750000">750.000 EUR</option>
                                <option value="1000000">1.000.000 EUR</option>
                                <option value="1500000">1.500.000 EUR</option>
                                <option value="2000000">2.000.000 EUR</option>
                                <option value="5000000">5.000.000 EUR+</option>
                            </select>
                        </div>
                    </div>
                    <div class="col-12 col-lg-3 col-md-3">
                        <div class="form-group">
                            <button class="btn btn-primary btn-outline-blue text-uppercase btn-block"> {{filter_search}} <i
                                    class="fa fa-search ml-1"></i></button>
                        </div>
                    </div>
                </div>

            </div>
        </div>
    </form>

    <!-- DIENSTLEISTER CTA BANNER -->
    <section class="cta-professionals">
        <div class="container">
            <div class="cta-box">
                <div class="row align-items-center">
                    <div class="col-lg-8 col-md-7">
                        <h2>Jeste li stručnjak za nekretnine?</h2>
                        <p>Agent, arhitekt, odvjetnik ili porezni savjetnik? Registrirajte se BESPLATNO i dosegnite tisuće klijenata!</p>
                    </div>
                    <div class="col-lg-4 col-md-5 text-md-right">
                                                 <a href="/ge/kroatien/partner-werden/" class="btn btn-cta pulse">
                            <i class="fa fa-star"></i> Registrirajte se besplatno
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <!-- END CTA BANNER -->


    <!-- POPULAR CITY -->
    <section class="popular__city-large">
        <div class="container">
            <div class="row">
                <div class="col-md-8 col-lg-6 mx-auto">
                    <div class="title__head">
                        <h2 class="text-center text-danger">
                            {{home_we_for_you}}
                        </h2>
                        {% comment %} <p class="text-center text-capitalize">{{home_choose_best}}</p> {% endcomment %}
                    </div>
                </div>

            </div>
            <div class="row">
                <div class="col-md-6 col-lg-4">
                    <!-- CARD IMAGE -->
                    <div class="myCard">
                        <div class="iconDiv">
                            <i class="fa fa-comments-o myIcon" aria-hidden="true"></i>
                        </div>
                        <h6 class="mb-4">{{home_register_free}}</h6>
                        <p class="">{{home_register_text}}</p>
                    </div>
                </div>
                <div class="col-md-6 col-lg-4">
                    <!-- CARD IMAGE -->
                    <div class="myCard">
                        <div class="iconDiv">
                            <i class="fa fa-building-o myIcon" aria-hidden="true"></i>
                        </div>
                        <h6 class="mb-4">{{home_personal_advice}}</h6>
                        <p class="">{{home_advice_text}}</p>
                    </div>
                </div>
                <div class="col-md-6 col-lg-4">
                    <!-- CARD IMAGE -->
                    <div class="myCard">
                        <div class="iconDiv">
                            <i class="fa fa-handshake-o myIcon" aria-hidden="true"></i>
                        </div>
                        <h6 class="mb-4">{{home_renting_selling}}</h6>
                        <p class="">{{home_rent_sell_text}}</p>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <!-- END POPULAR CITY -->

    <!-- FEATURED PROPERTIES -->
    <section class="featured__property bg-light">
        <div class="container">
            <div class="row">
                <div class="col-md-8 col-lg-6 mx-auto">
                    <div class="title__head">
                        <h2 class="text-center text-danger">
                            {{home_your_selection}}
                        </h2>
                        {% comment %} <p class="text-center text-capitalize">{{home_handpicked}}</p> {% endcomment %}

                    </div>
                </div>
                <div class="clearfix"></div>
            </div>
            <div class="row">
                <div class="col-lg-12">
                    <div class="featured__property-carousel owl-carousel owl-theme">
                        {% for listing in latest_8_listings %}
                        <div class="item">
                            <div class="card__image card__box">
                                <a href="{% url 'main:property_details' listing.id %}">
                                    <div class="card__image-header h-250">
                                        {% comment %} <div class="bg-mycolor ribbon text-capitalize">{{home_featured}}</div> {% endcomment %}
                                        <img src="{% if listing.photo_main %}{{listing.photo_main.url}}{% else %}{% static 'images/news1.png' %}{% endif %}" alt=""
                                            class="img-fluid w100 img-transition">
                                        <div class="info" style="background-color: #db0000;"> {{listing.json_content.property_status}}
                                        </div>
                                    </div>
                                </a>
                                <div class="card__image-body">
                                    <span class="badge bg-logo2 text-capitalize mb-2">{{listing.json_content.property_type}}</span>
                                    <h6 class="text-capitalize" style="min-height: 54px;">
                                        <a href="{% url 'main:property_details' listing.id %}">{{listing.json_content.property_title|truncatechars:60}}</a>
                                    </h6>

                                    <p class="text-capitalize">
                                        <i class="fa fa-map-marker"></i>
                                        {{listing.json_content.address}}
                                    </p>
                                    <ul class="list-inline card__content">
                                        <li class="list-inline-item">
                        
                                            <span style="color: #db0000;">
                                                {{baths}} <br>
                                                <i class="fa fa-bath" style="color: #db0000;"></i> {{listing.json_content.bathrooms|floatformat:0|add:"0"}}
                                            </span>
                                        </li>
                                        <li class="list-inline-item">
                                            <span style="color: #db0000;">
                                                {{beds}} <br>
                                                <i class="fa fa-bed" style="color: #db0000;"></i> {{listing.json_content.bedrooms}}
                                            </span>
                                        </li>
                                        <li class="list-inline-item">
                                            <span style="color: #db0000;">
                                                {{floors}} <br>
                                                <i class="fa fa-inbox" style="color: #db0000;"></i> {{listing.json_content.floors}}
                                            </span>
                                        </li>
                                        <li class="list-inline-item">
                                            <span style="color: #db0000;">
                                                {{area}} <br>
                                                <i class="fa fa-map" style="color: #db0000;"></i> {{listing.json_content.area}}
                                                sq ft
                                            </span>
                                        </li>
                                    </ul>
                                </div>
                                <div class="card__image-footer">
                                    <figure>
                                       <img {% if listing.realtor and listing.realtor.id %}onclick="window.location.href='{% url "main:agent" listing.realtor.id %}'"{% endif %} src="{% if listing.realtor and listing.realtor.profile_image %}{{listing.realtor.profile_image.url}}{% else %}{% static 'images/p2.png' %}{% endif %}" alt=""
                                        
                                            class="img-fluid rounded-circle">
                                    </figure>
                                    <ul class="list-inline my-auto">
                                        <li class="list-inline-item ">
                                            <a href="{% if listing.realtor and listing.realtor.id %}{% url "main:agent" listing.realtor.id %}{% else %}#{% endif %}">
                                                {{listing.realtor.first_name}}
                                                {{listing.realtor.last_name}}
                                            </a>
                        
                                        </li>
                        
                                    </ul>
                                    <ul class="list-inline my-auto ml-auto">
                                        <li class="list-inline-item">
                        
                                            <h6>$
                                                {{listing.json_content.property_price}} €
                                            </h6>
                                        </li>
                        
                                    </ul>
                                </div>
                            </div>
                            
                        </div> 
                        {% endfor %}
                        

                    </div>
                </div>
            </div>

        </div>
    </section>
    <!-- END FEATURED PROPERTIES -->



    <!-- ABOUT -->
    <section class="home__about">
        <div class="container">
            <div class="row">
                <div class="col-lg-6">
                    <div class="title__leading">
                        <!-- <h6 class="text-uppercase">trusted By thousands</h6> -->
                        <h2 class="text-danger">{{WhyChooseUs}}</h2>
                        <p>{{home_worry_free_title}}:</p>
                        <p>{{home_worry_free_text}}
                            
                            
                        <p>{{home_partner_title}}:</p>
                        <p>{{home_partner_text1}}</p>
                            
                        <p>{{home_partner_text2}}</p>
                            
                            
                        <p>{{home_why_multilingual}}</p>
                        <p>{{home_clear_communication}}</p>
                            
                            
                        <p>{{home_cultural_title}}:</p>
                        <p>{{home_cultural_text}}
                        </p>
                        <p>{{home_we_for_you_full}}</p>
                        <a href="{% url 'main:about' %}" class="btn btn-primary btn-outline-blue mt-3 text-capitalize"> {{home_read_more}}
                            <i class="fa fa-angle-right ml-3 "></i></a>
                    </div>
                </div>
                <div class="col-lg-6">
                    <div class="about__image">
                        <div class="about__image-top">
                            <div class="about__image-top-hover">
                                <img src="{% static 'images/home-image-small.jpg' %}" alt="" class="img-fluid">
                            </div>

                        </div>
                        <div class="about__image-bottom">
                            <div class="about__image-bottom-hover">
                                <img src="{% static 'images/home-image-smal2.jpg' %}" alt=""
                                    class="img-fluid">
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <!-- END ABOUT -->

    <!-- PARTNER CAROUSEL -->
    <section class="projects__partner bg-light py-5">
        <div class="container">
            <div class="row justify-content-center">
                <div class="col-md-8 col-lg-6">
                    <div class="title__head">
                        <h2 class="text-center text-capitalize text-danger">{{our_partners}}</h2>
                        <p class="text-center text-muted">{{partner_subtitle}}</p>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-md-12">
                    <div class="partner-carousel-container" style="overflow: hidden; position: relative;">
                       <div class="partner-carousel" id="partnerCarousel">
                        {% if partners_with_logo %}
                            {% for partner in partners_with_logo %}
                            <a href="/ge/kroatien/{{ partner.professional_type }}/{{ partner.slug }}/" class="partner-logo-item" title="{{ partner.name }}">
                                <img src="{{ partner.company_logo.url }}" alt="{{ partner.name }}" class="partner-logo-img">
                            </a>
                            {% endfor %}
                            {% for partner in partners_with_logo %}
                            <a href="/ge/kroatien/{{ partner.professional_type }}/{{ partner.slug }}/" class="partner-logo-item" title="{{ partner.name }}">
                                <img src="{{ partner.company_logo.url }}" alt="{{ partner.name }}" class="partner-logo-img">
                            </a>
                            {% endfor %}
                        {% else %}
                            <a href="#" class="partner-logo-item">
                                <img src="{% static 'images/anlage-logo-domus.png' %}" alt="Domus" class="partner-logo-img">
                            </a>
                            <a href="#" class="partner-logo-item">
                                <img src="{% static 'images/anlage-logo-hausbau-kroatien.png' %}" alt="Hausbau Kroatien" class="partner-logo-img">
                            </a>
                            <a href="#" class="partner-logo-item">
                                <img src="{% static 'images/partner-logo6.png' %}" alt="Partner" class="partner-logo-img">
                            </a>
                            <a href="#" class="partner-logo-item">
                                <img src="{% static 'images/partner-logo7.png' %}" alt="Partner" class="partner-logo-img">
                            </a>
                            <a href="#" class="partner-logo-item">
                                <img src="{% static 'images/anlage-logo-domus.png' %}" alt="Domus" class="partner-logo-img">
                            </a>
                            <a href="#" class="partner-logo-item">
                                <img src="{% static 'images/anlage-logo-hausbau-kroatien.png' %}" alt="Hausbau Kroatien" class="partner-logo-img">
                            </a>
                            <a href="#" class="partner-logo-item">
                                <img src="{% static 'images/partner-logo6.png' %}" alt="Partner" class="partner-logo-img">
                            </a>
                            <a href="#" class="partner-logo-item">
                                <img src="{% static 'images/partner-logo7.png' %}" alt="Partner" class="partner-logo-img">
                            </a>
                        {% endif %}
                    </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <style>
        .partner-carousel-container { padding: 20px 0; }
        .partner-carousel {
            display: flex;
            animation: scrollPartners 30s linear infinite;
            width: max-content;
        }
        .partner-carousel:hover { animation-play-state: paused; }
        .partner-logo-item {
            flex: 0 0 auto;
            margin: 0 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }
        .partner-logo-img {
            max-height: 60px;
            max-width: 150px;
            width: auto;
            height: auto;
            object-fit: contain;
            filter: grayscale(30%);
            opacity: 0.8;
            transition: all 0.3s ease;
        }
        .partner-logo-item:hover .partner-logo-img {
            filter: grayscale(0%);
            opacity: 1;
            transform: scale(1.1);
        }
        @keyframes scrollPartners {
            0% { transform: translateX(0); }
            100% { transform: translateX(-50%); }
        }
        @media (max-width: 768px) {
            .partner-logo-img { max-height: 45px; max-width: 120px; }
            .partner-logo-item { margin: 0 25px; }
        }
    </style>
    <!-- END PARTNER CAROUSEL -->


    {% comment %} <!-- TESTIMONIAL -->
    <section>
        <div class="container">
            <div class="row">
                <div class="col-md-8 col-lg-6 mx-auto">
                    <div class="title__head">
                        <h2 class="text-center text-capitalize text-danger">
                            {{whatpeoplesays}}
                        </h2>
                        <!--  <p class="text-center text-capitalize">{{peoplesaysabout}}</p> -->
                    </div>
                </div>
                <div class="clearfix"></div>
            </div>
            <div class="testimonial owl-carousel owl-theme">
                <!-- TESTIMONIAL -->
                <div class="item testimonial__block">
                    <div class="testimonial__block-card bg-reviews">
                        <p>
                            {{Thankyouwalls}}
                        </p>
                    </div>
                    <div class="testimonial__block-users">
                        <div class="testimonial__block-users-img">
                            <img src="{% static 'images/p1.png' %}" alt="" class="img-fluid">
                        </div>
                        <div class="testimonial__block-users-name" style="color: #013565;">
                            jhon doe <br>
                            <span>owner, digital agency</span>
                        </div>
                    </div>
                </div>
                <!-- END TESTIMONIAL -->
                <!-- TESTIMONIAL -->
                <div class="item testimonial__block">
                    <div class="testimonial__block-card bg-reviews">
                        <p>
                            {{Thankyouwalls}}
                        </p>
                    </div>
                    <div class="testimonial__block-users">
                        <div class="testimonial__block-users-img">
                            <img src="{% static 'images/p2.png' %}" alt="" class="img-fluid">
                        </div>
                        <div class="testimonial__block-users-name" style="color: #013565;">
                            jhon doe <br>
                            <span>owner, digital agency</span>
                        </div>
                    </div>
                </div>
                <!-- END TESTIMONIAL -->
                <!-- TESTIMONIAL -->
                <div class="item testimonial__block">
                    <div class="testimonial__block-card bg-reviews">
                        <p>
                            {{Thankyouwalls}}
                        </p>
                    </div>
                    <div class="testimonial__block-users">
                        <div class="testimonial__block-users-img">
                            <img src="{% static 'images/p3.png' %}" alt="" class="img-fluid">
                        </div>
                        <div class="testimonial__block-users-name" style="color: #013565;">
                            jhon doe <br>
                            <span>owner, digital agency</span>
                        </div>
                    </div>
                </div>
                <!-- END TESTIMONIAL -->
                <!-- TESTIMONIAL -->
                <div class="item testimonial__block">
                    <div class="testimonial__block-card bg-reviews">
                        <p>
                            {{Thankyouwalls}}
                        </p>
                    </div>
                    <div class="testimonial__block-users">
                        <div class="testimonial__block-users-img">
                            <img src="{% static 'images/p4.png' %}" alt="" class="img-fluid">
                        </div>
                        <div class="testimonial__block-users-name" style="color: #013565;">
                            jhon doe <br>
                            <span>owner, digital agency</span>
                        </div>
                    </div>
                </div>
                <!-- END TESTIMONIAL -->
                <!-- TESTIMONIAL -->
                <div class="item testimonial__block">
                    <div class="testimonial__block-card bg-reviews">
                        <p>
                            {{Thankyouwalls}}
                        </p>
                    </div>
                    <div class="testimonial__block-users">
                        <div class="testimonial__block-users-img">
                            <img src="{% static 'images/p5.png' %}" alt="" class="img-fluid">
                        </div>
                        <div class="testimonial__block-users-name" style="color: #013565;">
                            jhon doe <br>
                            <span>owner, digital agency</span>
                        </div>
                    </div>
                </div>
                <!-- END TESTIMONIAL -->

            </div>
        </div>
    </section>
    <!-- END TESTIMONIAL --> {% endcomment %}


    <!-- BLOG -->
    <section class="blog__home bg-light">
        <div class="container">
            <div class="row">
                <div class="col-md-8 col-lg-6 mx-auto">
                    <div class="title__head">
                        <h2 class="text-center text-capitalize text-danger">
                            {{lastestnews}}
                        </h2>
                        {% comment %} <p class="text-center text-capitalize">
                            {{FindOfThe}}
                        </p> {% endcomment %}
                    </div>
                </div>
                <div class="clearfix"></div>
            </div>
            <div class="row">
                <div class="col-md-4">
                    <!-- BLOG  -->
                    <div class="card__image">
                        <div class="card__image-header h-250">
                            <img src="{% static 'images/news1.svg' %}" alt="" class="img-fluid w100 img-transition">
                            <div class="info"> {{home_event}}</div>
                        </div>
                        <div class="card__image-body">
                            <!-- <span class="badge badge-secondary p-1 text-capitalize mb-3">May 08, 2019 </span> -->
                            <h6 class="">
                                <a href="{% url 'main:blog-single-1' %}">{{home_news_title_1}}</a>
                            </h6>
                            <p class=" mb-0">
                                {{home_news_body_1}}
                            </p>
                        </div>
                        <div class="card__image-footer">
                            <ul class="list-inline my-auto ml-auto">
                                <li class="list-inline-item ">
                                    <a href="{% url 'main:blog-single-1' %}" class="btn btn-sm btn-primary bg-logo2"><small
                                            class="text-white ">{{home_read_more}} <i
                                                class="fa fa-angle-right ml-1"></i></small></a>
                                </li>
                            </ul>
                        </div>
                    </div>
                    <!-- END BLOG -->
                </div>
                <div class="col-md-4">
                    <!-- BLOG  -->
                    <div class="card__image">
                        <div class="card__image-header h-250">
                            <img src="{% static 'images/news2.svg' %}" alt="" class="img-fluid w100 img-transition">
                            <div class="info"> {{home_top_news}}</div>
                        </div>
                        <div class="card__image-body">
                            <!-- <span class="badge badge-secondary p-1 text-capitalize mb-3">May 08, 2019 </span> -->
                            <h6 class="">
                                <a href="{% url 'main:blog-single-2' %}">{{home_news_title_2}}</a>
                            </h6>
                            <p class=" mb-0">
                                {{home_news_body_2}}
                            </p>


                        </div>
                        <div class="card__image-footer">
                            {% comment %} <figure>
                                <img src="{% static 'images/p4.png' %}" alt="" class="img-fluid rounded-circle">
                            </figure>
                            <ul class="list-inline my-auto">
                                <li class="list-inline-item">
                                    <a href="#">
                                        tom wilson
                                    </a>

                                </li>

                            </ul> {% endcomment %}
                            <ul class="list-inline my-auto ml-auto">
                                <li class="list-inline-item">
                                    <a href="{% url 'main:blog-single-2' %}" class="btn btn-sm btn-primary bg-logo2"><small class="text-white ">{{home_read_more}} <i
                                                class="fa fa-angle-right ml-1"></i></small></a>
                                </li>

                            </ul>
                        </div>
                    </div>
                    <!-- END BLOG -->
                </div>
                <div class="col-md-4">
                    <!-- BLOG  -->
                    <div class="card__image">
                        <div class="card__image-header h-250">
                            <img src="{% static 'images/news3.svg' %}" alt="" class="img-fluid w100 img-transition">
                            <div class="info"> {{home_event}}</div>
                        </div>
                        <div class="card__image-body">
                            <!-- <span class="badge badge-secondary p-1 text-capitalize mb-3">May 08, 2019 </span> -->
                            <h6 class="">
                                <a href="{% url 'main:blog-single-3' %}">{{home_news_title_3}}</a>
                            </h6>
                            <p class="mb-0">
                                {{home_news_body_3}}
                            </p>
                        </div>
                        <div class="card__image-footer">
                            {% comment %} <figure>
                                <img src="{% static 'images/p6.png' %}" alt="" class="img-fluid rounded-circle">
                            </figure>
                            <ul class="list-inline  my-auto">
                                <li class="list-inline-item">
                                    <a href="#">
                                        tom wilson
                                    </a>
                                </li>
                            </ul> {% endcomment %}
                            <ul class="list-inline  my-auto ml-auto">
                                <li class="list-inline-item">
                                    <a href="{% url 'main:blog-single-3' %}" class="btn btn-sm btn-primary bg-logo2"><small class="text-white">{{home_read_more}} <i
                                                class="fa fa-angle-right ml-1"></i></small></a>
                                </li>
                            </ul>
                        </div>
                    </div>
                    <!-- END BLOG -->
                </div>
            </div>
        </div>
    </section>
    <!-- END BLOG -->

    <!-- CALL TO ACTION -->
    <section class="bg-gradient py-5">
        <div class="container">
            <div class="row align-items-center">
                <div class="col-lg-9">
                    <h2 class="text-uppercase text-light">{{StartJourney}}</h2>
                    <p class="text-capitalize text-light">{{ReliableTransparent}}
                    </p>
                </div>
                {% comment %} <div class="col-lg-3">
                    <a href="#" class="btn btn-light text-uppercase ">{{requestquote}}
                        <i class="fa fa-angle-right ml-3 arrow-btn "></i></a>
                </div> {% endcomment %}
            </div>
        </div>
    </section>
    <!-- END CALL TO ACTION -->

    <div class="container">
        <div class="row">
            <div class="col-12">
                <img src="{% static 'images/logo-black2.png' %}" alt="logo" style="width: 255px; padding: 20px 0;">
            </div>
        </div>
    </div>

    <!-- CALL TO ACTION -->
    {% comment %} <section class="bg-gradient py-5">
        <div class="container">
            <div class="row align-items-center">
                <div class="col-lg-9">
                    <h2 class="text-uppercase text-light">{{LookingToSell}}</h2>
                    <p class="text-capitalize text-light">{{WeWillAssist}}
                    </p>
                </div>
                 <div class="col-lg-3">
                    <a href="#" class="btn btn-light text-uppercase ">{{requestquote}}
                        <i class="fa fa-angle-right ml-3 arrow-btn "></i></a>
                </div>
            </div>
        </div>
    </section> {% endcomment %}
    <!-- END CALL TO ACTION -->

    {% comment %} <div class="container">
        <div class="row">
            <div class="col-12">
                <img src="{% static 'images/logo-black2.png' %}" alt="logo" style="width: 255px; padding: 20px 0;">
            </div>
        </div>
    </div> {% endcomment %}


<script>
const salePricesFrom = [
    {value: '', label: '{{ filter_price_from }}'},
    {value: '50000', label: '50.000 EUR'},
    {value: '100000', label: '100.000 EUR'},
    {value: '200000', label: '200.000 EUR'},
    {value: '300000', label: '300.000 EUR'},
    {value: '500000', label: '500.000 EUR'},
    {value: '750000', label: '750.000 EUR'},
    {value: '1000000', label: '1.000.000 EUR'},
    {value: '2000000', label: '2.000.000 EUR'},
    {value: '3000000', label: '3.000.000 EUR'},
    {value: '5000000', label: '5.000.000 EUR'},
    {value: '10000000', label: '10.000.000 EUR'}
];
const salePricesTo = [
    {value: '', label: '{{ filter_price_to }}'},
    {value: '100000', label: '100.000 EUR'},
    {value: '200000', label: '200.000 EUR'},
    {value: '300000', label: '300.000 EUR'},
    {value: '500000', label: '500.000 EUR'},
    {value: '750000', label: '750.000 EUR'},
    {value: '1000000', label: '1.000.000 EUR'},
    {value: '2000000', label: '2.000.000 EUR'},
    {value: '3000000', label: '3.000.000 EUR'},
    {value: '5000000', label: '5.000.000 EUR'},
    {value: '7500000', label: '7.500.000 EUR'},
    {value: '10000000', label: '10.000.000 EUR'},
    {value: '15000000', label: '15.000.000 EUR'}
];
const rentPricesFrom = [
    {value: '', label: '{{ filter_price_from }}'},
    {value: '300', label: '300 EUR/Monat'},
    {value: '500', label: '500 EUR/Monat'},
    {value: '750', label: '750 EUR/Monat'},
    {value: '1000', label: '1.000 EUR/Monat'},
    {value: '1500', label: '1.500 EUR/Monat'},
    {value: '2000', label: '2.000 EUR/Monat'},
    {value: '3000', label: '3.000 EUR/Monat'}
];
const rentPricesTo = [
    {value: '', label: '{{ filter_price_to }}'},
    {value: '500', label: '500 EUR/Monat'},
    {value: '750', label: '750 EUR/Monat'},
    {value: '1000', label: '1.000 EUR/Monat'},
    {value: '1500', label: '1.500 EUR/Monat'},
    {value: '2000', label: '2.000 EUR/Monat'},
    {value: '3000', label: '3.000 EUR/Monat'},
    {value: '5000', label: '5.000 EUR/Monat'},
    {value: '8000', label: '8.000 EUR/Monat'}
];
function updatePriceOptions() {
    var status = document.getElementById('property_status');
    if (!status) return;
    var priceFrom = document.getElementById('price_from');
    var priceTo = document.getElementById('price_to');
    if (!priceFrom || !priceTo) return;
    priceFrom.innerHTML = '';
    priceTo.innerHTML = '';
    var fromOptions = (status.value === 'Rent') ? rentPricesFrom : salePricesFrom;
    var toOptions = (status.value === 'Rent') ? rentPricesTo : salePricesTo;
    fromOptions.forEach(function(opt) {
        var option = document.createElement('option');
        option.value = opt.value;
        option.textContent = opt.label;
        priceFrom.appendChild(option);
    });
    toOptions.forEach(function(opt) {
        var option = document.createElement('option');
        option.value = opt.value;
        option.textContent = opt.label;
        priceTo.appendChild(option);
    });
    if (typeof jQuery !== 'undefined') {
        jQuery(priceFrom).niceSelect('update');
        jQuery(priceTo).niceSelect('update');
    }
}
document.addEventListener('DOMContentLoaded', function() {
    updatePriceOptions();
    var lastStatus = '';
    setInterval(function() {
        var el = document.getElementById('property_status');
        if (el && el.value !== lastStatus) {
            lastStatus = el.value;
            updatePriceOptions();
        }
    }, 300);
});


// AI Smart-Search
document.getElementById('smart-search-btn').addEventListener('click', performSmartSearch);
document.getElementById('smart-search-input').addEventListener('keypress', function(e) {
    if (e.key === 'Enter') performSmartSearch();
});

function performSmartSearch() {
    const query = document.getElementById('smart-search-input').value.trim();
    if (!query) return;
    
    const searchBox = document.querySelector('.smart-search-box');
    const loading = document.getElementById('smart-search-loading');
    const results = document.getElementById('smart-search-results');
    const listings = document.getElementById('smart-search-listings');
    const message = document.getElementById('smart-search-message');
    
    // Filigrane Animation hinzufügen
    if (!document.getElementById('smart-search-style')) {
        const style = document.createElement('style');
        style.id = 'smart-search-style';
        style.innerHTML = `
            @keyframes border-light {
                0% { background-position: 0% 50%; }
                50% { background-position: 100% 50%; }
                100% { background-position: 0% 50%; }
            }
            .search-glow {
                position: relative;
            }
            .search-glow::before {
                content: '';
                position: absolute;
                top: 2px;
                left: 2px;
                right: 2px;
                bottom: 2px;
                border-radius: 13px;
                border: 2px solid transparent;
                background: linear-gradient(90deg, 
                    rgba(255,255,255,0.1) 0%, 
                    rgba(255,255,255,0.8) 25%, 
                    rgba(255,255,255,0.1) 50%,
                    rgba(255,255,255,0.8) 75%,
                    rgba(255,255,255,0.1) 100%
                );
                background-size: 200% 200%;
                animation: border-light 2s linear infinite;
                pointer-events: none;
                -webkit-mask: linear-gradient(#fff 0 0) padding-box, linear-gradient(#fff 0 0);
                mask: linear-gradient(#fff 0 0) padding-box, linear-gradient(#fff 0 0);
                -webkit-mask-composite: xor;
                mask-composite: exclude;
            }
        `;
        document.head.appendChild(style);
    }
    searchBox.classList.add('search-glow');
    
    loading.style.display = 'block';
    results.style.display = 'none';
    
    fetch('/{{ language }}/api/suche-v2/', {
        method: 'POST',
        headers: {
            'Content-Type': 'application/json',
            'X-CSRFToken': getCookie('csrftoken')
        },
        body: JSON.stringify({ query: query })
    })
    .then(response => response.json())
    .then(data => {
        loading.style.display = 'none';
        searchBox.classList.remove('search-glow');
        
        if (data.status === 'success') {
            message.textContent = data.message;
            listings.innerHTML = '';
            
            if (data.results && data.results.length > 0) {
                data.results.forEach(item => {
                    const card = `
                        <div class="col-md-4 mb-4">
                            <div class="card h-100" style="border-color: #003167;">
                                <img src="${item.image || '/static/images/no-image.png'}" class="card-img-top" alt="${item.title}" style="height: 200px; object-fit: cover;">
                                <div class="card-body">
                                    <h6 class="card-title" style="color: #003167;">${item.title}</h6>
                                    <p class="card-text text-muted">
                                        <i class="fa fa-map-marker"></i> ${item.location}<br>
                                        <i class="fa fa-bed"></i> ${item.bedrooms} | 
                                        <i class="fa fa-bath"></i> ${item.bathrooms} |
                                        <i class="fa fa-map"></i> ${item.area} m²
                                    </p>
                                    <h5 style="color: #c41e3a;">€ ${item.price.toLocaleString()}</h5>
                                    <a href="/property-details/${item.id}/" class="btn btn-sm" style="background-color: #003167; color: white;">Details</a>
                                </div>
                            </div>
                        </div>
                    `;
                    listings.innerHTML += card;
                });
            }
            
            results.style.display = 'block';
            results.scrollIntoView({ behavior: 'smooth' });
        } else {
            alert(data.message || 'Fehler bei der Suche');
        }
    })
    .catch(error => {
        loading.style.display = 'none';
        console.error('Smart-Search Error:', error);
    });
}

function getCookie(name) {
    let cookieValue = null;
    if (document.cookie && document.cookie !== '') {
        const cookies = document.cookie.split(';');
        for (let i = 0; i < cookies.length; i++) {
            const cookie = cookies[i].trim();
            if (cookie.substring(0, name.length + 1) === (name + '=')) {
                cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
                break;
            }
        }
    }
    return cookieValue;
}
</script>
{% endblock body %}


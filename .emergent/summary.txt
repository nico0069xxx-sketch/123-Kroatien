<analysis>**original_problem_statement:**
The user's initial request was to create a comprehensive overview of the Django project, which could also serve as a developer sitemap. This evolved into a series of tasks to build and refine a public-facing, fully multilingual sitemap for website visitors.

The agent's work included:
1.  Creating a developer-focused sitemap document ().
2.  Building a new, public-facing visitor sitemap from a nearly empty template ().
3.  Debugging and fixing numerous broken or incorrect links and content sections on the new sitemap based on user feedback.
4.  Making several login-protected pages (like Sitemap and AGB) public.
5.  Extending the user's session duration to 2 weeks to improve their local testing workflow.
6.  Investigating and reporting on the status of all AI-powered features (Expertenfinder, Chatbot, etc.), discovering that several linked features were never implemented.
7.  Re-implementing the sitemap to be fully multilingual (12 languages), including SEO enhancements like JSON-LD.
8.  Debugging the new multilingual sitemap's language switcher.
9.  Re-implementing the Buyer Guide page to be fully translated into 12 languages and adding a page-specific language switcher as a workaround for a global navigation issue.

**PRODUCT REQUIREMENTS:**
-   A developer-focused project overview document.
-   A public, user-facing HTML sitemap that is accurate and well-structured.
-   The sitemap and Buyer Guide must be fully functional and translated into all 12 project languages.
-   An audit of the site's AI features.

**User's preferred language**: German. The next agent **MUST** continue to communicate with the user (Nik) in informal German (du).

**what currently exists?**
The application is a Django monolith. A new, fully functional, SEO-optimized, and multilingual sitemap has been implemented at . The associated view has been made public, and the link in the footer is now correct. The Buyer Guide page is also fully multilingual. A key architectural flaw was discovered: the global language switcher in the header does not work for pages with translated URL slugs. User sessions have been configured to last for two weeks to ease local development testing. An audit revealed that the Expertenfinder and Chatbot features, despite being linked in the UI, do not exist in the codebase.

**Last working item**:
-   Last item agent was working: Implementing a fully multilingual (12-language) Buyer Guide page. This involved translating all text content within the template and adding a page-specific language switcher at the bottom with correct, hardcoded URLs for each language. This was a workaround for the broken global header switcher.
-   Status: COMPLETED
-   Agent Testing Done: Y
-   Which testing method agent to use? The user has been testing manually.
-   User Testing Done: Y

**All Pending/In progress Issue list**:
-   **Issue 1: Global Header Language Switcher Fails on Translated URLs (P0 - CRITICAL)**
-   **Issue 2: Non-Existent AI Features Linked in UI (P1 - HIGH)**
-   **Issue 3: Fragile Django Migrations (P1 - HIGH RISK / Technical Debt)**

**Issues Detail:**
-   **Issue 1: Global Header Language Switcher Fails on Translated URLs**
    -   **Description**: The main language switcher in the site header does not correctly redirect to the translated equivalent of the current page if the URL slugs are translated (e.g.,  in German vs.  in Croatian). It typically redirects to the root of a section (e.g., the glossary index) instead of the specific page (e.g., the buyer guide). This is a critical usability flaw for a multilingual site.
    -   **Attempted fixes**: A page-specific language switcher was successfully implemented on the Buyer Guide page as a temporary workaround. The root cause in the global header was not addressed.
    -   **Next debug checklist**:
        1.  The current system relies on  in the  parameter, which fails when path components are translated.
        2.  A robust solution requires creating a mapping system. For any given page, the system must know the corresponding URLs for all 12 languages.
        3.  This could be implemented via a new model, a dictionary in , or by adding a method to relevant models ().
        4.  The context processor and  template must be updated to use this mapping to generate the correct URLs for the header dropdown.
    -   **Why fix this issue and what will be achieved with the fix?**: This is a core functionality failure for a multilingual site. Fixing it will allow users to seamlessly switch languages on any page.
    -   **Status**: NOT STARTED
    -   **Is recurring issue?**: Y (discovered this session)
    -   **Should Test frontend/backend/both after fix?**: Both.
    -   **Blocked on other issue**: None.

-   **Issue 2: Non-Existent AI Features Linked in UI**
    -   **Description**: The agent's audit () confirmed that the Expertenfinder and Chatbot features do not exist in the codebase, although they are linked in the UI (e.g., footer). This leads to 404 errors or dead links.
    -   **Attempted fixes**: The links on the new sitemap page were marked as in development or removed. The original links in other parts of the site (like the footer) remain.
    -   **Next debug checklist**:
        1.  Confirm with the user whether these features should be built or if the links should be removed globally.
        2.  If removing, grep the entire  directory for Expertenfinder and the chatbot link to find all occurrences.
        3.  If building, gather requirements from the user for these AI features.
    -   **Why fix this issue and what will be achieved with the fix?**: Fixes broken user experience and removes dead links, which is bad for usability and SEO.
    -   **Status**: NOT STARTED
    -   **Is recurring issue?**: N
    -   **Should Test frontend/backend/both after fix?**: Frontend.
    -   **Blocked on other issue**: None.

-   **Issue 3: Fragile Django Migrations**
    -   **Description**: Inherited from a previous fork. The  command is unstable and at risk of failing due to issues in older models (, ). This is a critical blocker for any future database schema changes.
    -   **Attempted fixes**: Bypassed in a previous session, but the root cause was not addressed.
    -   **Next debug checklist**: Refer to the previous handoff summary for a detailed checklist. The core issue is likely a field that was made non-nullable without a default or a data migration.
    -   **Why fix this issue and what will be achieved with the fix?**: The project cannot be reliably maintained or extended without a stable migration system.
    -   **Status**: NOT STARTED
    -   **Is recurring issue?**: Y
    -   **Should Test frontend/backend/both after fix?**: Backend.
    -   **Blocked on other issue**: This is a blocker itself.

**In progress Task List**:
-   None.

**Upcoming and Future Tasks**
-   **Upcoming Tasks:**
    -   **(P0) Implement URL Mapping System:** Fix the global header language switcher (see Issue 1).
    -   **(P1) Implement or Remove AI Features:** Build the Expertenfinder and Chatbot, or remove all dead links to them from the UI.
    -   **(P1) Sprint 4**: Topic clustering on landing pages, integrate compliance texts.
    -   **(P1) Finalize Sprint 3 (UX/Akkordeon-Layout):** Fix the missing smooth animations on the glossary accordion UI.

-   **Future Tasks (Technical Debt & Backlog):**
    -   **(P0) Critical CSS Instability**: Refactor the project's fragile CSS.
    -   **(P0) Refactor URL Architecture**: Systematically review and fix inconsistent URL translations (e.g., ).
    -   **(P1) Data Quality**: Fix numeric slugs for Russian and Greek glossary terms.
    -   **(P1) Consolidate Registration URLs & Views.**
    -   **(P1) Implement a Review/Rating System.**

**Completed work in this session**
-   **Sitemap Creation & Refinement:**
    -   Created a developer-focused sitemap document: .
    -   Implemented a new, public, and visually structured visitor sitemap at .
    -   Made the  page fully multilingual (12 languages) with dynamic text and language-aware URLs.
    -   Added SEO enhancements to the sitemap, including a JSON-LD schema.
-   **Bug Fixes & UX Improvements:**
    -   Fixed numerous broken links on the sitemap page.
    -   Made the AGB page public and fixed a bug that was hiding its text content.
    -   Changed the color scheme of the Buyer Guide page from green to blue to match the site's branding.
    -   Extended user session length to 2 weeks to improve the local development workflow.
    -   Fixed the sitemap link in the global footer.
-   **Multilingual Content:**
    -   Implemented a fully translated (12 languages) Buyer Guide page.
    -   Added a page-specific language switcher to the Buyer Guide page as a workaround for the broken global switcher.
-   **AI & Code Audit:**
    -   Audited all AI features and created a status report ().
    -   Identified that Expertenfinder and Chatbot features were never implemented.

**Known issue recurrence from previous fork**
-   **Issue recurrence in previous fork**: Fragile Django Migrations.
-   **Recurrence count**: 3
-   **Status**: NOT STARTED (Remains a critical blocker).

**Code Architecture**
-   **Framework**: Django monolith
-   **Key Modified Files**:
    -   : Created from a near-empty file into a fully-featured, multilingual sitemap.
    -   : Heavily refactored to be fully multilingual with a page-specific language switcher.
    -   : Removed  from  and  views.
    -   : Added the  variable to the context for the  view to enable automatic language detection in the template.
    -   : Added  and  to extend session lifetime.
    -   : Corrected the  for the sitemap link.

**Key Technical Concepts**
-   **Django Multilingual Templating**: Extensive use of  blocks to serve translated content from a single template.
-   **Django Context Processors**: Relied on variables like  and  being available globally in templates.
-   **i18n URL Routing**: Debugged issues related to language prefixes in URLs and translated slugs ( vs. ). Discovered limitations of the current implementation.
-   **JSON-LD**: Implemented Schema.org structured data for SEO and AI understanding of the sitemap.

**All files of reference**
-   
-   
-   
-   
-   
-    (created in agent's environment)

**Critical Info for New Agent**
-   **GLOBAL LANGUAGE SWITCHER IS BROKEN**: This is the most critical issue found in this session. The header language switcher CANNOT correctly handle pages with translated URL slugs. Do not try to use it for testing those pages. A workaround was implemented for the Buyer Guide (a page-specific switcher), which could be a model for other pages until a global fix is implemented.
-   **AI FEATURES ARE MISSING**: The user believes features like Expertenfinder and a Chatbot exist. They do not. You will need to manage user expectations and either plan their implementation or remove the dead links.
-   **USER'S LOCAL ENVIRONMENT**: The user is on a Mac and often has a different version of the code than the agent's environment. Be prepared to provide full code blocks for copy-pasting, as  commands or partial diffs can fail or cause confusion. The user is diligent about running usage: git [-v | --version] [-h | --help] [-C <path>] [-c <name>=<value>]
           [--exec-path[=<path>]] [--html-path] [--man-path] [--info-path]
           [-p | --paginate | -P | --no-pager] [--no-replace-objects] [--bare]
           [--git-dir=<path>] [--work-tree=<path>] [--namespace=<name>]
           [--super-prefix=<path>] [--config-env=<name>=<envvar>]
           <command> [<args>]

These are common Git commands used in various situations:

start a working area (see also: git help tutorial)
   clone     Clone a repository into a new directory
   init      Create an empty Git repository or reinitialize an existing one

work on the current change (see also: git help everyday)
   add       Add file contents to the index
   mv        Move or rename a file, a directory, or a symlink
   restore   Restore working tree files
   rm        Remove files from the working tree and from the index

examine the history and state (see also: git help revisions)
   bisect    Use binary search to find the commit that introduced a bug
   diff      Show changes between commits, commit and working tree, etc
   grep      Print lines matching a pattern
   log       Show commit logs
   show      Show various types of objects
   status    Show the working tree status

grow, mark and tweak your common history
   branch    List, create, or delete branches
   commit    Record changes to the repository
   merge     Join two or more development histories together
   rebase    Reapply commits on top of another base tip
   reset     Reset current HEAD to the specified state
   switch    Switch branches
   tag       Create, list, delete or verify a tag object signed with GPG

collaborate (see also: git help workflows)
   fetch     Download objects and refs from another repository
   pull      Fetch from and integrate with another repository or a local branch
   push      Update remote refs along with associated objects

'git help -a' and 'git help -g' list available subcommands and some
concept guides. See 'git help <command>' or 'git help <concept>'
to read about a specific subcommand or concept.
See 'git help git' for an overview of the system. commands when instructed.

**documents and test reports created in this job**
-    (in the agent's environment)

**Last 10 User Messages and any pending HUMAN messages**
10.  - (The session is ending, it was a great finish, thanks and see you soon, don't forget the handoff.) - Status: Done.
9.   - (Yes, that looks good, the language selection at the bottom works perfectly, just not the one at the top.) - Status: Acknowledged, issue documented.
8.   - (No, when I switch from German to Croatian, I land on this wrong URL...) - Status: Resolved with a page-specific switcher.
7.   - (Okay, the language selection is gone but it's in German and the 12 languages in the header lead to the glossary which is wrong.) - Status: Resolved by fixing the view context.
6.   - (Yes, that's the right one now, but it's only in German, and the language selection at the top for de, en, and hr can be deleted.) - Status: Resolved.
5.   - (Sorry, I hadn't uploaded the new code.) - Status: Resolved.
4.   - (The design has changed and it's only shown in German...) - Status: Resolved by restoring the correct design and fixing translations.
3.   - (1 and 2, I'll finish around 11 PM.) - User wants to commit and then translate the buyer guide. - Status: Done.
2.   - (This is not yet translated...) - Status: In progress, led to the final task.
1.   - (Yes, that all works now, but I'm not sure about the links, I have to check.) - Status: User confirmed most links are okay.

**Project Health Check:**
-   **Broken**: The global language switching mechanism for i18n URLs is fundamentally flawed. The Django migration system remains fragile.
-   **Mocked**: N/A
-   **Technical Debt**: High. In addition to migrations and CSS, the lack of a centralized URL translation mapping system is a major architectural debt that is now causing critical bugs.</analysis>
